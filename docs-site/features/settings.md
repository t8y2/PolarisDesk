# 设置

配置 PolarisDesk 的各项功能，让应用更符合你的使用习惯。

## 模型设置

### AI 服务商

选择你想使用的 AI 服务商：

- **OpenAI** - GPT-3.5, GPT-4, GPT-4o
- **Anthropic** - Claude 3 (Opus, Sonnet, Haiku)
- **Google** - Gemini Pro, Gemini 1.5
- **DeepSeek** - DeepSeek Chat, DeepSeek Coder
- **Moonshot** - Moonshot-v1 (Kimi)
- **OpenRouter** - 聚合多个模型
- **SiliconCloud** - 硅基流动
- **Ollama** - 本地运行模型
- **智谱 AI** - GLM 系列
- **自定义端点** - 兼容 OpenAI API 格式的服务

### API 配置

#### API 地址

大多数服务商使用默认地址，也可以自定义：

```
https://api.openai.com/v1
```

#### API 密钥

输入对应服务商的 API Key：

1. 点击 **获取 Key** 链接访问服务商官网
2. 注册账号并获取 API Key
3. 粘贴到输入框
4. 点击保存

::: tip 提示
API Key 存储在本地，不会上传到云端。
:::

#### 模型选择

根据服务商选择可用的模型：

- 输入模型名称（如 `gpt-4o-mini`）
- 或从下拉列表选择

::: warning 注意

- LLM 模型只支持文本
- VLM 模型支持图片和文本
  :::

### 生成参数

#### 最大令牌数 (Max Tokens)

控制 AI 回复的最大长度：

- **默认**: 4096
- **范围**: 1 - 128000（取决于模型）
- **建议**:
  - 简短回答: 1000-2000
  - 正常对话: 2000-4000
  - 长文本: 4000-8000

#### 温度 (Temperature)

控制回复的随机性和创造性：

- **范围**: 0.0 - 2.0
- **默认**: 0.7
- **建议**:
  - 事实问答: 0.0-0.3（更准确）
  - 日常对话: 0.5-0.8（平衡）
  - 创意写作: 0.8-1.2（更有创意）

#### Top P

控制采样的多样性：

- **范围**: 0.0 - 1.0
- **默认**: 1.0
- **建议**: 通常保持默认值

#### 历史对话轮数

控制发送给 AI 的历史对话数量：

- **默认**: 10 轮
- **0**: 不携带历史（每次都是新对话）
- **建议**:
  - 简单问答: 0-5 轮
  - 连续对话: 10-20 轮
  - 长期对话: 20+ 轮

::: tip 提示
历史轮数越多，消耗的 token 越多，但 AI 能更好地理解上下文。
:::

## 应用设置

### 通用设置

#### 语言

选择界面语言：

- **简体中文**
- **English**

#### 主题

选择界面主题：

- **深色模式** - 适合夜间使用
- **浅色模式** - 适合白天使用

#### 星空背景

开启或关闭聊天界面的星空动画背景。

#### 默认展开思考过程

对于支持思考链的模型（如 DeepSeek），是否默认展开思考过程。

### 高级功能

#### 自动截图

开启后，发送消息时如果没有附带任何媒体资源，将自动截取整个屏幕。

**适用场景**:

- 需要 AI 看到你的屏幕
- 频繁需要截图的工作流

::: warning 注意
自动截图会捕获整个屏幕，注意保护隐私信息。
:::

#### UI 树感知 (macOS)

开启后，发送消息时如果没有附带任何媒体资源和截图，将自动获取所有活动窗口的 UI 结构。

**功能说明**:

- 捕获窗口的 UI 元素树
- 包含按钮、文本框、标签等元素信息
- 让 AI 更好地理解你的界面

**要求**:

- 仅支持 macOS
- 需要授予辅助功能权限

**授予权限**:

1. 打开 **系统设置** > **隐私与安全性** > **辅助功能**
2. 找到 PolarisDesk
3. 勾选允许

::: tip 提示
UI 树感知特别适合需要 AI 帮助操作界面的场景。
:::

#### 静默执行命令

开启后，AI 生成的系统命令会自动执行，无需手动确认。

**适用场景**:

- 信任 AI 生成的命令
- 频繁执行简单命令
- 自动化工作流

::: danger 危险
静默执行模式会自动运行 AI 生成的命令，可能存在风险。建议只在熟悉的操作环境中开启。
:::

#### 本地保存录音

开启后，语音对话的录音文件会保存到本地。

### 快捷键

查看和自定义快捷键：

| 功能         | 默认快捷键 (Windows/Linux) | 默认快捷键 (macOS) |
| ------------ | -------------------------- | ------------------ |
| 快速截图     | `Ctrl+Shift+A`             | `Cmd+Shift+A`      |
| 区域截图     | `Ctrl+Shift+X`             | `Cmd+Shift+X`      |
| 快速切换窗口 | `Ctrl+Shift+Space`         | `Cmd+Shift+Space`  |
| 新建对话     | `Ctrl+Shift+N`             | `Cmd+Shift+N`      |
| 打开历史     | `Ctrl+Shift+H`             | `Cmd+Shift+H`      |
| 发送消息     | `Enter`                    | `Enter`            |
| 换行         | `Shift+Enter`              | `Shift+Enter`      |
| 粘贴图片     | `Ctrl+V`                   | `Cmd+V`            |

::: tip 提示
点击快捷键输入框，按下新的快捷键组合即可修改。
:::

## 系统提示词

自定义 AI 的行为和角色：

### 什么是系统提示词？

系统提示词是发送给 AI 的第一条消息，用于定义 AI 的角色、行为和回答风格。

### 如何设置

1. 打开 **设置** > **系统提示词**
2. 在文本框中输入提示词
3. 点击保存

### 示例提示词

#### 专业助手

```
你是一位专业的助手，请用简洁明了的方式回答问题。
在回答时：
1. 直接给出答案，避免冗长的开场白
2. 使用清晰的结构和格式
3. 提供具体的例子和步骤
4. 如果不确定，请诚实说明
```

#### 编程专家

```
你是一位资深的软件工程师，擅长多种编程语言和技术栈。
在回答编程问题时：
1. 提供完整可运行的代码示例
2. 解释关键概念和实现原理
3. 指出最佳实践和常见陷阱
4. 考虑性能、安全和可维护性
```

#### 学习导师

```
你是一位耐心的学习导师，擅长用简单易懂的方式解释复杂概念。
在教学时：
1. 从基础概念开始讲解
2. 使用生动的比喻和例子
3. 循序渐进，由浅入深
4. 鼓励提问和思考
```

::: tip 提示

- 系统提示词会影响所有对话
- 修改后立即生效
- 可以随时修改和优化
  :::

## 人设预设

快速切换不同的 AI 角色，详见 [人设预设](./persona-presets.md)。

### 内置人设

- 编程专家
- 写作助手
- 学习导师
- 翻译助手
- 等等...

### 自定义人设

创建你自己的人设：

1. 打开 **设置** > **人设预设**
2. 点击 **添加人设**
3. 填写名称、描述和提示词
4. 保存并使用

::: tip 提示
人设预设会覆盖系统提示词。激活人设后，系统提示词会被禁用。
:::

## 关于

### 应用信息

- **应用名称**: PolarisDesk
- **当前版本**: 显示当前安装的版本号
- **GitHub 仓库**: 访问项目主页

### 检查更新

1. 点击 **检查更新** 按钮
2. 如果有新版本，会显示更新信息
3. 点击 **下载更新** 下载新版本
4. 下载完成后点击 **重启并安装**

::: tip 提示
更新会在后台下载，不影响当前使用。
:::

## 数据管理

### 对话历史

- **位置**: 存储在本地 SQLite 数据库
- **清空**: 设置 > 历史记录 > 清空所有历史

### 配置文件

配置文件位置：

- **Windows**: `%APPDATA%/polaris-desk`
- **macOS**: `~/Library/Application Support/polaris-desk`
- **Linux**: `~/.config/polaris-desk`

### 备份和恢复

手动备份配置：

1. 找到配置文件目录
2. 复制整个文件夹
3. 保存到安全位置

恢复配置：

1. 关闭应用
2. 将备份文件夹复制回原位置
3. 重新启动应用

## 常见问题

### API Key 无效？

1. 检查 API Key 是否正确
2. 确认账户余额充足
3. 检查 API 端点是否正确
4. 查看错误日志获取详细信息

### 设置不生效？

1. 确认已点击保存按钮
2. 尝试重启应用
3. 检查配置文件是否损坏

### 如何重置设置？

1. 关闭应用
2. 删除配置文件目录
3. 重新启动应用（会创建默认配置）

::: warning 注意
重置设置会清空所有配置和对话历史，请谨慎操作。
:::
