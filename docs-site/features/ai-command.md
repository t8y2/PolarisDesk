# AI 命令行

AI 命令行是 PolarisDesk 的强大功能，让 AI 理解你的自然语言意图，自动生成并执行系统命令，大幅提升工作效率。

## 功能介绍

传统的命令行需要你记住复杂的命令语法，而 AI 命令行让你用自然语言描述想做什么，AI 会：

1. 🧠 **理解意图** - 分析你的需求
2. 💻 **生成命令** - 自动生成对应的系统命令
3. ⚡ **执行命令** - 在你确认后执行命令
4. 📊 **显示结果** - 展示执行结果和输出

## 使用场景

### 文件操作

**你说**: "列出当前目录下所有的 Python 文件"

**AI 生成**:

```bash
ls *.py
```

**你说**: "查找包含 'TODO' 的所有文件"

**AI 生成**:

```bash
grep -r "TODO" .
```

### 系统管理

**你说**: "查看系统内存使用情况"

**AI 生成**:

```bash
# macOS/Linux
free -h

# Windows
systeminfo | findstr /C:"Available Physical Memory"
```

**你说**: "查看当前运行的 Node.js 进程"

**AI 生成**:

```bash
ps aux | grep node
```

### 开发任务

**你说**: "安装 Vue 3 项目依赖"

**AI 生成**:

```bash
npm install
```

**你说**: "查看 Git 提交历史"

**AI 生成**:

```bash
git log --oneline -10
```

### 网络操作

**你说**: "测试能否访问 Google"

**AI 生成**:

```bash
ping google.com -c 4
```

**你说**: "查看本机 IP 地址"

**AI 生成**:

```bash
# macOS/Linux
ifconfig | grep inet

# Windows
ipconfig
```

## 如何使用

### 方式一：在聊天中使用

1. 在聊天输入框中描述你想执行的操作
2. AI 会生成对应的命令
3. 命令会显示在一个特殊的命令块中
4. 点击 **执行** 按钮运行命令
5. 查看执行结果

### 方式二：静默执行模式

如果你信任 AI 生成的命令，可以开启静默执行模式：

1. 打开 **设置** > **应用设置**
2. 开启 **静默执行命令**
3. AI 生成的命令会自动执行，无需手动确认

::: warning 安全提示
静默执行模式会自动运行 AI 生成的命令，请谨慎使用。建议只在熟悉的操作环境中开启。
:::

## 命令块功能

AI 生成的命令会显示在一个交互式的命令块中：

### 命令块组成

```
┌─────────────────────────────────┐
│ 💻 生成的命令                    │
│ ls -la                          │
│                                 │
│ [执行] [复制]                    │
└─────────────────────────────────┘
```

### 执行状态

命令块会显示不同的状态：

- **待执行** - 灰色，等待你点击执行
- **执行中** - 蓝色，命令正在运行
- **成功** - 绿色，命令执行成功
- **失败** - 红色，命令执行失败

### 查看输出

执行后，命令块会展开显示：

```
┌─────────────────────────────────┐
│ ✅ 执行成功 (退出码: 0)          │
│                                 │
│ 命令:                           │
│ ls -la                          │
│                                 │
│ 输出:                           │
│ total 48                        │
│ drwxr-xr-x  12 user  staff  384 │
│ -rw-r--r--   1 user  staff  123 │
│ ...                             │
│                                 │
│ [复制输出]                       │
└─────────────────────────────────┘
```

## 支持的命令类型

### 文件系统

- 列出文件: `ls`, `dir`
- 查找文件: `find`, `grep`
- 复制移动: `cp`, `mv`
- 创建删除: `mkdir`, `rm`
- 查看内容: `cat`, `less`

### 进程管理

- 查看进程: `ps`, `top`
- 结束进程: `kill`
- 后台运行: `&`, `nohup`

### 网络工具

- 网络测试: `ping`, `curl`
- 端口扫描: `netstat`, `lsof`
- 下载文件: `wget`, `curl`

### 开发工具

- Git 操作: `git`
- 包管理: `npm`, `pip`, `brew`
- 构建工具: `make`, `cmake`

### 系统信息

- 系统状态: `uname`, `systeminfo`
- 磁盘空间: `df`, `du`
- 内存使用: `free`, `vm_stat`

## 安全机制

### 危险命令警告

对于可能危险的命令，AI 会特别标注：

```
⚠️ 警告：此命令可能会修改系统文件或设置，请谨慎确认

命令: sudo rm -rf /some/path

[我知道风险，仍要执行] [取消]
```

危险命令包括：

- 使用 `sudo` 的命令
- 删除操作 `rm -rf`
- 系统配置修改
- 网络配置更改

### 命令审查

在执行前，你可以：

1. 查看完整的命令
2. 理解命令的作用
3. 决定是否执行
4. 修改命令参数

### 执行限制

某些命令会被限制：

- 不允许执行交互式命令（如 `vim`, `nano`）
- 不允许执行长时间运行的命令（如 `npm run dev`）
- 不允许执行需要密码的命令（除非使用静默模式）

## 最佳实践

### 1. 清晰描述意图

❌ 不好的描述:

```
"看一下文件"
```

✅ 好的描述:

```
"列出当前目录下所有的 Markdown 文件，按修改时间排序"
```

### 2. 指定工作目录

如果需要在特定目录执行命令，明确说明：

```
"在 ~/projects/myapp 目录下运行 npm install"
```

### 3. 分步执行复杂任务

对于复杂任务，分成多个步骤：

```
1. "创建一个名为 backup 的目录"
2. "复制所有 .txt 文件到 backup 目录"
3. "压缩 backup 目录为 backup.zip"
```

### 4. 验证命令

在执行前，检查：

- 命令是否正确
- 参数是否合适
- 路径是否正确
- 是否会影响重要文件

### 5. 保存常用命令

对于常用的命令，可以：

- 复制命令保存到笔记
- 创建 shell 脚本
- 设置命令别名

## 平台差异

### macOS / Linux

使用 Unix shell 命令：

```bash
ls -la
grep -r "pattern" .
ps aux | grep node
```

### Windows

使用 PowerShell 或 CMD 命令：

```powershell
dir
Get-Process | Where-Object {$_.Name -like "*node*"}
```

AI 会根据你的操作系统自动生成对应的命令。

## 常见问题

### AI 生成的命令不正确怎么办？

1. 重新描述你的需求，提供更多细节
2. 手动修改命令（复制后在终端修改）
3. 向 AI 反馈问题，让它重新生成

### 可以执行多行命令吗？

可以。AI 可以生成包含多个命令的脚本：

```bash
cd ~/projects
git pull
npm install
npm run build
```

### 命令执行失败怎么办？

1. 查看错误信息
2. 检查命令是否正确
3. 确认是否有足够的权限
4. 向 AI 描述错误，寻求帮助

### 如何停止正在执行的命令？

目前不支持中断正在执行的命令。建议：

- 只执行快速完成的命令
- 长时间运行的任务在终端手动执行

## 提示

::: tip 提示
AI 命令行特别适合：

- 记不住复杂命令语法的场景
- 需要快速执行常见任务
- 学习新的命令行工具
  :::

::: warning 注意

- 始终检查命令再执行
- 对系统关键操作要格外小心
- 定期备份重要数据
  :::

::: danger 危险
永远不要执行你不理解的命令，特别是包含 `sudo` 或 `rm -rf` 的命令。
:::

## 快捷操作

| 操作     | 说明                       |
| -------- | -------------------------- |
| 描述任务 | 在聊天中用自然语言描述     |
| 执行命令 | 点击命令块的"执行"按钮     |
| 复制命令 | 点击"复制"按钮             |
| 查看输出 | 命令执行后自动展开显示     |
| 静默执行 | 设置 > 应用设置 > 静默执行 |
